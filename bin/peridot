#!/usr/bin/env php
<?php

use Peridot\Core\SpecResult;
use Peridot\Runner\Runner;
use Peridot\Runner\SuiteLoader;
use Peridot\Runner\Context;

$autoload = null;
if (file_exists(__DIR__ . '/../vendor/autoload.php')) {
    // peridot is in [project]/bin/
    $autoload = realpath(__DIR__ . '/../vendor/autoload.php');
} elseif (file_exists(__DIR__ . '/../autoload.php')) {
    // peridoot is in [project]/vendor/bin
    $autoload = realpath(__DIR__ . '/../autoload.php');
}

if (!$autoload) {
    print(
        'You need to set up the project dependencies using the following commands:' . PHP_EOL .
        'curl -s http://getcomposer.org/installer | php' . PHP_EOL .
        'php composer.phar install' . PHP_EOL
    );
    exit(1);
}

require_once $autoload;
// todo - we are going to need to know how to find the bootstrap when installed as a library in another project
require_once 'bootstrap.php';

use Peridot\Console\Application;

$application = new Application();
$application->run();
